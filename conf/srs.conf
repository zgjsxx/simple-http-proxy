# main config for srs.
# @see full.conf for detail config.

listen              1935;
max_connections     1000;
srs_log_tank        file;
srs_log_level       trace;
srs_log_file        ./output/srs.log;
pid ./output/srs.pid;
daemon              on;
http_api {
    enabled         on;
    listen          80;
    # For https_api or HTTPS API.
    https {
        # Whether enable HTTPS API.
        # Overwrite by env SRS_HTTP_API_HTTPS_ENABLED
        # default: off
        enabled on;
        # The listen endpoint for HTTPS API.
        # Note that you're able to use a dedicated port for HTTPS API, such as 1990, and the HTTP API should not be
        # the same of HTTP server(8080) neither.
        # Overwrite by env SRS_HTTP_API_HTTPS_LISTEN
        # Default: 1990
        listen 443;
        # The SSL private key file, generated by:
        #       openssl genrsa -out server.key 2048
        # default: ./conf/server.key
        key ./conf/server.key;
        # The SSL public cert file, generated by:
        #       openssl req -new -x509 -key server.key -out server.crt -days 3650 -subj "/C=CN/ST=Beijing/L=Beijing/O=Me/OU=Me/CN=ossrs.net"
        # default: ./conf/server.crt
        cert ./conf/server.crt;
    }
}
http_proxy {
    enabled on;
    listen 8080;
    
    next_hip {
        enabled off;
        ip 192.168.56.104;
        port 80;
    }
}

http_server {
    enabled         on;
    listen          8080;
    dir             ./objs/nginx/html;
}
rtc_server {
    enabled on;
    listen 8000; # UDP port
    # @see https://ossrs.net/lts/zh-cn/docs/v4/doc/webrtc#config-candidate
    candidate $CANDIDATE;
}
vhost __defaultVhost__ {
    hls {
        enabled         on;
    }
    http_remux {
        enabled     on;
        mount       [vhost]/[app]/[stream].flv;
    }
    rtc {
        enabled     on;
        # @see https://ossrs.net/lts/zh-cn/docs/v4/doc/webrtc#rtmp-to-rtc
        rtmp_to_rtc on;
        # @see https://ossrs.net/lts/zh-cn/docs/v4/doc/webrtc#rtc-to-rtmp
        rtc_to_rtmp on;
    }
}
